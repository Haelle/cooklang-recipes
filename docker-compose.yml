services:
  cookcli:
    container_name: cookcli
    image: inigochoa/cookcli:latest
    restart: unless-stopped

    # Ã‰coute uniquement en local (nginx en frontal obligatoire)
    ports:
      - 127.0.0.1:9080:9080

    volumes:
      - ./recipes:/recipes:ro  # Read-only explicite

    # === HARDENING ===
    read_only: true
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    user: "65534:65534"            # nobody:nogroup (non-root)
